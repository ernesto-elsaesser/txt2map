<html>
  <head>
    <style>
      .container { margin: 20px auto; text-align: center; }
      .textbox { width: 80%; height: 200px; margin: 0 auto 20px; }
      a { color: blue; font-weight: bold; cursor: pointer; }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Input</h1>
      <textarea class="textbox" id="input"></textarea><br/>
      <a onclick="post()" id="button">PARSE</a>
      <h1>Output</h1>
      <textarea class="textbox" id="output"></textarea>
    </div>

    <script>
    var input = document.getElementById('input');
    var button = document.getElementById('button');
    var output = document.getElementById('output');

    function post() {

      var params = {
        method: 'POST',
        body: input.value,
        headers: { 'Accept': 'text/plain' }
      }

      toggle(true);
      fetch('/', params)
      .then(function (res) {
        res.text().then(finish);
      }).catch(function (err) {
        finish(err.toString(), true)
      });
    }

    function finish(text, failed) {
      if (failed) {
        output.style.color = 'red';
      } else {
        output.style.color = 'black';
      }
      
      if (text == '') {
        text = 'Nothing found.'
      }
      output.value = text;
      toggle(false);
    }

    function toggle(loading) {
      if (loading) {
        button.innerHTML = 'LOADING ...';
        button.style.color = 'grey';
        button.onclick = '';
      } else {
        button.innerHTML = 'PARSE';
        button.style.color = 'blue';
        button.onclick = post;
      }
    }
    </script>
  </body>
</html>